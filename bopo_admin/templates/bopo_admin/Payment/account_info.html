{% extends "bopo_admin/base.html" %}
{% load static %}

{% block content %}
<link rel="stylesheet" href="{% static 'bopo_admin/css/account_info.css' %}">

<h2 class="title">Bonus Point Account</h2>

<!-- Account Information Form -->
<form id="accountForm">
    <div class="container account-container mt-4">
        <div class="row">
            <!-- Left Column -->
            <div class="col-md-6">
                <div class="form-group">
                    <label>Account Number</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-university"></i></span>
                        <input type="text" class="form-control" id="accountNumber" placeholder="Enter Account Number" required>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <label>Payable To</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-user"></i></span>
                        <input type="text" class="form-control" id="payableTo" placeholder="Enter Payable To" required>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <label>Bank Name</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-building"></i></span>
                        <input type="text" class="form-control" id="bankName" placeholder="Enter Bank Name" required>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <label>City</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-city"></i></span>
                        <input type="text" class="form-control" id="city" placeholder="Enter City" required>
                    </div>
                </div>
            </div>

            <!-- Right Column -->
            <div class="col-md-6">
                <div class="form-group">
                    <label>Account Type</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-wallet"></i></span>
                        <input type="text" class="form-control" id="accountType" placeholder="Enter Account Type" required>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <label>IFSC Code</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-barcode"></i></span>
                        <input type="text" class="form-control" id="ifscCode" placeholder="Enter IFSC Code" required>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <label>Branch Name</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-map-marker-alt"></i></span>
                        <input type="text" class="form-control" id="branchName" placeholder="Enter Branch Name" required>
                    </div>
                </div>

                <div class="form-group mt-3">
                    <label>Pin Code</label>
                    <div class="input-group">
                        <span class="input-group-text"><i class="fas fa-map-pin"></i></span>
                        <input type="text" class="form-control" id="pinCode" placeholder="Enter Pin Code" required>
                    </div>
                </div>
            </div>
        </div>

        <!-- Buttons -->
        <div class="button-container">
            <button type="button" class="btn btn-danger" id="cancelBtn">Cancel</button>
            <button type="submit" class="btn btn-success" id="saveBtn">Save</button>
        </div>
    </div>
</form>

<!-- Toast Notification -->
<div id="toast" class="toast-container">
    <i class="fa fa-check-circle"></i>
    <span class="toast-message">Account Created successfully!</span>
</div>

<script>
    document.getElementById("cancelBtn").addEventListener("click", function () {
        let inputs = document.querySelectorAll(".form-control");
        inputs.forEach(input => {
            input.value = ""; // Clear all fields
        });
    });

    document.getElementById("accountForm").addEventListener("submit", function (event) {
        event.preventDefault(); // Prevent actual form submission

        let isValid = true;
        let inputs = document.querySelectorAll(".form-control");

        // Check if all fields are filled
        inputs.forEach(input => {
            if (input.value.trim() === "") {
                isValid = false;
                input.classList.add("is-invalid"); // Highlight empty fields
            } else {
                input.classList.remove("is-invalid");
            }
        });

        if (!isValid) {
            alert("Please fill in all required fields.");
            return;
        }

        // Show toast notification
        let toast = document.getElementById("toast");
        toast.classList.add("toast-show");

        setTimeout(function () {
            toast.classList.add("toast-hide");
            setTimeout(() => {
                toast.classList.remove("toast-show", "toast-hide");
                document.getElementById("accountForm").submit();
            }, 500);
        }, 3000); // Hide after 3 seconds
    });
</script>

{% endblock %}
