{% extends "bopo_admin/base.html" %}
{% load static %}
{% block content %}

<link rel="stylesheet" href="{% static 'bopo_admin/css/reduce_limit.css' %}">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>

<!-- Select2 -->
<link href="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/css/select2.min.css" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/select2@4.1.0-rc.0/dist/js/select2.min.js"></script>

<!-- DataTables -->
<link rel="stylesheet" href="https://cdn.datatables.net/1.13.6/css/jquery.dataTables.min.css">
<link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.4.1/css/buttons.dataTables.min.css">

<style>
    div.dataTables_filter { display: none !important; }

    .top-controls {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 10px;
    }

    .search-box {
        padding: 6px 10px;
        width: 250px;
    }

    #custom-buttons {
        display: flex;
        justify-content: flex-end;
    }

    .dataTables_paginate {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 8px;
        margin-top: 20px;
        flex-wrap: wrap;
    }

    .dataTables_paginate .paginate_button {
        background: linear-gradient(135deg, #ff7b54, #ff4e00);
        color: white;
        border: none;
        padding: 8px 14px;
        border-radius: 8px;
        font-size: 14px;
        font-weight: 500;
        cursor: pointer;
        box-shadow: 0 4px 8px rgba(52, 49, 48, 0.3);
        transition: transform 0.2s ease, box-shadow 0.2s ease, background 0.3s ease;
    }

    .dataTables_paginate .paginate_button:hover {
        transform: translateY(-2px);
        background: linear-gradient(135deg, #ff9a76, #ff6a2d);
        box-shadow: 0 6px 12px rgba(41, 39, 38, 0.4);
    }

    .dataTables_paginate .paginate_button.current {
        background: linear-gradient(135deg, #333, #111);
        color: #fff;
        font-weight: bold;
        border: 2px solid #ff4e00;
        box-shadow: 0 6px 14px rgba(0, 0, 0, 0.5);
    }

</style>

<div class="customer-container">
    <div class="customer-header">
        <h2>Requested Cash-Out Amount (BBP)</h2>
        <div class="customer-buttons"></div>
    </div>

    <div class="customer-list">
        <div class="customer-table">
            <div class="top-controls">
                <input type="text" class="search-box" id="search-customer" placeholder="Search ...">
                <div id="custom-buttons"></div>
            </div>

            <table id="customer-table" class="display" style="width:100%">
                <thead>
                    <tr>
                        <th>#</th>
                        <th>Merchant ID</th>
                        <th>Contact Person</th>
                        <th>Mobile Number</th>
                        <th>Request Amount (BBP)</th>
                        <th>Status</th>
                        <th>Action</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>1</td>
                        <td>MID100001</td>
                        <td>Shrutika Desai</td>
                        <td>99999999999</td>
                        <td>100</td>
                        <td>
                            <label class="switch">
                                <input type="checkbox" checked>
                                <span class="slider round"></span>
                            </label>
                        </td>
                        <td>
                            <button class="btn btn-sm btn-success" onclick="openCashOutModal(1)">ðŸ’¸ Cash Out</button>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- Cash Out Modal -->
<!-- Modal Structure -->
<div class="modal-container" id="cashOutModal">
    <div class="modal-content-box">
        <span class="modal-close-btn" onclick="closeCashOutModal()">&times;</span>
        <div class="modal-header">Payment Details</div>

        <div class="input-group">
            <label for="transactionId">Transaction ID</label>
            <input type="text" id="transactionId" class="input-field" placeholder="Enter Transaction ID">
        </div>

        <div class="input-group">
            <label for="paymentMethod">Payment Method</label>
            <select id="paymentMethod" class="input-field">
                <option value="">Select</option>
                 <option value="Bank Transfer">Bank Transfer</option>
                <option value="UPI">UPI</option>
                <option value="Credit Card">Credit Card</option>
                <option value="Debit Card">Debit Card</option>
                      
            </select>
        </div>
        

        <div class="input-group">
            <label for="paymentDate">Payment Date</label>
            <input type="date" id="paymentDate" class="input-field">
        </div>

        <button class="btn-save" onclick="submitCashOut()">Save</button>
    </div>
</div>


<!-- Toast -->
<div id="toast" class="toast-container {% if message %}toast-show{% endif %}">
    <i class="fa fa-exclamation-circle"></i>
    <span class="toast-message">{{ message }}</span>
</div>

<!-- Scripts -->
<script src="https://cdn.datatables.net/1.13.6/js/jquery.dataTables.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/dataTables.buttons.min.js"></script>
<script src="https://cdn.datatables.net/buttons/2.4.1/js/buttons.colVis.min.js"></script>

<script>
    $(document).ready(function () {
        const table = $('#customer-table').DataTable({
            dom: 'Bfrtip',
            pageLength: 6,
            lengthChange: false,
            buttons: [
                {
                    extend: 'colvis',
                    text: '<i class="fas fa-table"></i>',
                    className: 'btn btn-light'
                }
            ],
            stripeClasses: []
        });

        table.buttons().container().appendTo('#custom-buttons');

        $('#search-customer').on('keyup', function () {
            table.search(this.value).draw();
        });

      
    });

    function openCashOutModal(id) {
        $('#cashOutModal').fadeIn();
    }
    
    function closeCashOutModal() {
        $('#cashOutModal').fadeOut();
    }
    
    function submitCashOut() {
        const transactionId = $('#transactionId').val();
        const paymentMethod = $('#paymentMethod').val();
        const paymentDate = $('#paymentDate').val();
    
        if (!transactionId || !paymentMethod || !paymentDate) {
            alert("Please fill in all fields.");
            return;
        }
    
        // Add your AJAX or form submission logic here
        console.log("Submitted Cash Out Data:", {
            transactionId, paymentMethod, paymentDate
        });
    
        closeCashOutModal();
    }
    
</script>


{% endblock %}
